<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Space Rental ‚Äî IslamicFamily H√ºb</title>
<link href="https://fonts.googleapis.com/css2?family=Alegreya:wght@700&family=Alegreya+Sans:ital,wght@0,300;0,400;0,500;0,700;0,800;1,400&display=swap" rel="stylesheet">
<style>
  :root {
    --green:   #275D43;
    --brown:   #E09964;
    --bg:      #FAFAF2;
    --ink:     #353535;
    --red:     #BB2D37;
    --arabica: #DCD9B8;
    --sun:     #F7AF29;
    --sand:    #EECBAF;
    --muted:   #6B7B73;
    --border:  #DCD9B8;
    --card:    #FFFFFF;
    --radius:  6px;
    --font:    'Alegreya Sans', sans-serif;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: var(--bg);
    font-family: var(--font);
    color: var(--ink);
    min-height: 100vh;
    font-size: 17px;
    line-height: 1.6;
  }

  /* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
  header {
    background: var(--green);
    border-bottom: 3px solid var(--brown);
    position: sticky;
    top: 0;
    z-index: 100;
  }

  .header-inner {
    max-width: 900px;
    margin: 0 auto;
    padding: 0 32px;
    height: 68px;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .logo-lockup {
    display: flex;
    align-items: center;
    gap: 14px;
    text-decoration: none;
  }

  .logo-mark { height: 34px; width: auto; flex-shrink: 0; display: block; }

  .logo-text { display: flex; flex-direction: column; line-height: 1.15; }
  .logo-name { font-family: 'Alegreya', serif; font-size: 1.35rem; font-weight: 700; color: #fff; letter-spacing: 0.01em; }
  .logo-sub  { font-size: 0.7rem; font-weight: 500; color: var(--sand); letter-spacing: 0.14em; text-transform: uppercase; }

  .header-badge {
    background: rgba(255,255,255,0.12);
    border: 1px solid rgba(255,255,255,0.22);
    color: var(--sand);
    font-size: 0.7rem;
    font-weight: 600;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    padding: 6px 14px;
    border-radius: 100px;
  }

  /* ‚îÄ‚îÄ PROGRESS ‚îÄ‚îÄ */
  .progress-wrap {
    background: var(--green);
    padding-bottom: 28px;
  }

  .progress-track {
    display: flex;
    align-items: flex-start;
    justify-content: center;
    max-width: 680px;
    margin: 0 auto;
    padding: 20px 32px 0;
  }

  .step-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    flex: 1;
    position: relative;
  }

  .step-item:not(:last-child)::after {
    content: '';
    position: absolute;
    top: 14px;
    left: 50%;
    width: 100%;
    height: 1px;
    background: rgba(255,255,255,0.18);
    transition: background 0.4s;
  }

  .step-item.done::after { background: var(--brown); }

  .step-circle {
    width: 28px; height: 28px;
    border-radius: 50%;
    border: 1.5px solid rgba(255,255,255,0.25);
    background: transparent;
    display: flex; align-items: center; justify-content: center;
    font-size: 0.75rem; font-weight: 700;
    color: rgba(255,255,255,0.45);
    transition: all 0.3s;
    z-index: 1;
  }

  .step-item.active .step-circle { border-color: var(--brown); background: var(--brown); color: white; }
  .step-item.done   .step-circle { border-color: rgba(255,255,255,0.6); background: rgba(255,255,255,0.15); color: white; }
  .step-item.done   .step-num    { display: none; }
  .step-item.done   .step-circle::after { content: '‚úì'; font-size: 0.78rem; }

  .step-label {
    font-size: 0.63rem; letter-spacing: 0.09em; text-transform: uppercase;
    font-weight: 600; color: rgba(255,255,255,0.35); white-space: nowrap;
  }
  .step-item.active .step-label { color: var(--sand); }
  .step-item.done   .step-label { color: rgba(255,255,255,0.55); }

  /* ‚îÄ‚îÄ MAIN ‚îÄ‚îÄ */
  main { max-width: 680px; margin: 0 auto; padding: 48px 24px 96px; }

  .step-panel { display: none; animation: fadeUp 0.35s ease; }
  .step-panel.active { display: block; }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(14px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  .panel-eyebrow {
    font-size: 0.72rem; font-weight: 700; letter-spacing: 0.14em;
    text-transform: uppercase; color: var(--brown); margin-bottom: 8px;
  }

  .panel-title {
    font-size: 2.4rem; font-weight: 800; line-height: 1.1;
    margin-bottom: 10px; color: var(--green);
  }

  .panel-sub {
    color: var(--muted); font-size: 1rem;
    margin-bottom: 40px; line-height: 1.65;
  }

  hr.divider { border: none; border-top: 1px solid var(--border); margin: 28px 0; }

  /* ‚îÄ‚îÄ FORM ‚îÄ‚îÄ */
  .form-group { margin-bottom: 24px; }

  label {
    display: block; font-size: 0.77rem; font-weight: 700;
    letter-spacing: 0.1em; text-transform: uppercase;
    color: var(--ink); margin-bottom: 8px;
  }

  label .req { color: var(--red); margin-left: 2px; }

  input[type="text"], input[type="email"], input[type="tel"],
  input[type="number"], textarea, select {
    width: 100%; padding: 13px 16px;
    background: var(--card); border: 1.5px solid var(--border);
    border-radius: var(--radius); font-family: var(--font);
    font-size: 1rem; color: var(--ink);
    transition: border-color 0.2s, box-shadow 0.2s;
    appearance: none;
  }

  input:focus, textarea:focus, select:focus {
    outline: none; border-color: var(--green);
    box-shadow: 0 0 0 3px rgba(39,93,67,0.12);
  }

  input::placeholder, textarea::placeholder { color: #B5BDB9; }
  textarea { resize: vertical; min-height: 100px; }
  .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }

  /* ‚îÄ‚îÄ RADIO / CHECKBOX ‚îÄ‚îÄ */
  .radio-group, .checkbox-group { display: flex; flex-direction: column; gap: 10px; }

  .radio-option, .checkbox-option {
    display: flex; align-items: center; gap: 12px;
    padding: 13px 16px; background: var(--card);
    border: 1.5px solid var(--border); border-radius: var(--radius);
    cursor: pointer; transition: border-color 0.2s, background 0.2s;
    font-size: 0.97rem; color: var(--ink); user-select: none;
  }

  .radio-option:hover, .checkbox-option:hover {
    border-color: var(--brown); background: rgba(224,153,100,0.05);
  }

  .radio-option:has(input:checked),
  .checkbox-option:has(input:checked) {
    border-color: var(--green); background: rgba(39,93,67,0.05);
  }

  .radio-option input, .checkbox-option input { display: none; }

  .radio-dot, .checkbox-dot {
    width: 18px; height: 18px; border: 2px solid var(--border);
    border-radius: 50%; flex-shrink: 0;
    display: flex; align-items: center; justify-content: center;
    transition: all 0.2s; background: white;
  }

  .checkbox-dot { border-radius: 4px; }

  .radio-option:has(input:checked) .radio-dot,
  .checkbox-option:has(input:checked) .checkbox-dot {
    border-color: var(--green); background: var(--green);
  }

  .radio-dot::after {
    content: ''; width: 7px; height: 7px; border-radius: 50%;
    background: white; display: none;
  }
  .radio-option:has(input:checked) .radio-dot::after { display: block; }

  .checkbox-dot::after {
    content: '‚úì'; font-size: 11px; font-weight: 800; color: white; display: none;
  }
  .checkbox-option:has(input:checked) .checkbox-dot::after { display: block; }

  .field-error { font-size: 0.8rem; color: var(--red); margin-top: 6px; font-weight: 500; }

  /* ‚îÄ‚îÄ BOXES ‚îÄ‚îÄ */
  .info-box {
    background: rgba(39,93,67,0.06); border: 1.5px solid rgba(39,93,67,0.18);
    border-left: 4px solid var(--green); border-radius: var(--radius);
    padding: 14px 18px; font-size: 0.92rem; color: var(--green);
    margin-bottom: 24px; line-height: 1.55;
  }

  .warn-box {
    background: rgba(224,153,100,0.09); border: 1.5px solid rgba(224,153,100,0.3);
    border-left: 4px solid var(--brown); border-radius: var(--radius);
    padding: 14px 18px; font-size: 0.92rem; color: #7A4A20;
    margin-bottom: 24px; line-height: 1.55;
  }

  /* ‚îÄ‚îÄ CALENDAR ‚îÄ‚îÄ */
  .avail-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 14px; }
  .month-label  { font-size: 1.2rem; font-weight: 800; color: var(--green); }
  .avail-nav    { display: flex; gap: 8px; }

  .avail-nav button {
    background: white; border: 1.5px solid var(--border);
    width: 34px; height: 34px; border-radius: var(--radius);
    cursor: pointer; font-size: 1.1rem; display: flex;
    align-items: center; justify-content: center;
    color: var(--green); transition: all 0.2s;
  }
  .avail-nav button:hover { border-color: var(--green); background: rgba(39,93,67,0.05); }

  .cal-grid { display: grid; grid-template-columns: repeat(7,1fr); gap: 4px; }

  .cal-day-name {
    text-align: center; font-size: 0.66rem; font-weight: 700;
    letter-spacing: 0.09em; text-transform: uppercase;
    color: var(--muted); padding: 8px 0 6px;
  }

  .cal-day {
    aspect-ratio: 1; display: flex; align-items: center; justify-content: center;
    border-radius: var(--radius); font-size: 0.88rem; font-weight: 500;
    cursor: pointer; transition: all 0.18s;
    border: 1.5px solid transparent; position: relative;
    background: white; color: var(--ink);
  }

  .cal-day.empty   { background: transparent; cursor: default; }
  .cal-day.past    { color: #CCC; cursor: not-allowed; background: transparent; }
  .cal-day.available:hover { border-color: var(--brown); background: rgba(224,153,100,0.07); color: var(--green); }
  .cal-day.busy    { background: #F4F4EE; color: #C8C8B8; cursor: not-allowed; text-decoration: line-through; }
  .cal-day.selected { background: var(--green); color: white; border-color: var(--green); font-weight: 700; }

  .cal-day.today::before {
    content: ''; position: absolute; bottom: 4px; left: 50%;
    transform: translateX(-50%); width: 4px; height: 4px;
    border-radius: 50%; background: var(--brown);
  }
  .cal-day.selected::before { background: rgba(255,255,255,0.55); }

  .legend { display: flex; gap: 20px; margin-top: 14px; font-size: 0.8rem; color: var(--muted); flex-wrap: wrap; }
  .legend-item { display: flex; align-items: center; gap: 7px; }
  .legend-dot  { width: 12px; height: 12px; border-radius: 3px; flex-shrink: 0; }

  /* ‚îÄ‚îÄ TIME SLOTS ‚îÄ‚îÄ */
  .time-slots { display: grid; grid-template-columns: repeat(4,1fr); gap: 8px; margin-top: 14px; }

  .time-slot {
    padding: 10px 6px; text-align: center; border: 1.5px solid var(--border);
    border-radius: var(--radius); font-size: 0.82rem; font-weight: 500;
    cursor: pointer; background: white; transition: all 0.18s; color: var(--ink);
  }
  .time-slot:hover    { border-color: var(--brown); background: rgba(224,153,100,0.07); color: var(--green); }
  .time-slot.selected { background: var(--green); color: white; border-color: var(--green); font-weight: 700; }
  .time-slot.busy     { background: #F4F4EE; color: #C8C8B8; cursor: not-allowed; border-color: transparent; }

  /* ‚îÄ‚îÄ SUMMARY CARD ‚îÄ‚îÄ */
  .summary-card { background: white; border: 1.5px solid var(--border); border-radius: var(--radius); overflow: hidden; margin-bottom: 28px; }
  .summary-head { background: var(--green); padding: 15px 24px; }
  .summary-head h3 { font-size: 0.85rem; font-weight: 700; color: white; letter-spacing: 0.07em; text-transform: uppercase; }
  .summary-body { padding: 4px 0; }

  .summary-row {
    display: flex; justify-content: space-between; align-items: start;
    padding: 11px 24px; border-bottom: 1px solid var(--bg); font-size: 0.95rem;
  }
  .summary-row:last-child { border-bottom: none; }
  .summary-key { color: var(--muted); font-size: 0.74rem; font-weight: 700; letter-spacing: 0.08em; text-transform: uppercase; padding-top: 2px; min-width: 120px; }
  .summary-val { font-weight: 500; text-align: right; max-width: 58%; color: var(--ink); }

  .price-block {
    background: rgba(39,93,67,0.05); border-top: 2px solid var(--green);
    padding: 18px 24px; display: flex; justify-content: space-between; align-items: center;
  }
  .price-label  { font-size: 0.78rem; font-weight: 700; letter-spacing: 0.1em; text-transform: uppercase; color: var(--green); }
  .price-amount { font-size: 2rem; font-weight: 800; color: var(--green); line-height: 1; }

  /* ‚îÄ‚îÄ STATE SCREENS ‚îÄ‚îÄ */
  .state-center { text-align: center; padding: 40px 16px; }

  .state-icon {
    width: 80px; height: 80px; border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-size: 2.2rem; margin: 0 auto 24px;
  }
  .state-icon.pending { background: rgba(224,153,100,0.1); border: 2px solid var(--brown); animation: pulse 2.2s infinite; }
  .state-icon.success { background: rgba(39,93,67,0.08); border: 2px solid var(--green); }
  .state-icon.denied  { background: rgba(187,45,55,0.07); border: 2px solid var(--red); }

  @keyframes pulse {
    0%, 100% { box-shadow: 0 0 0 0 rgba(224,153,100,0.2); }
    50%       { box-shadow: 0 0 0 14px rgba(224,153,100,0); }
  }

  /* ‚îÄ‚îÄ STEPS LIST ‚îÄ‚îÄ */
  .steps-list { background: white; border: 1.5px solid var(--border); border-radius: var(--radius); overflow: hidden; max-width: 440px; margin: 0 auto 32px; text-align: left; }
  .steps-list-head { background: var(--green); padding: 13px 20px; font-size: 0.75rem; font-weight: 700; letter-spacing: 0.1em; text-transform: uppercase; color: white; }
  .steps-list-row  { display: flex; gap: 14px; align-items: flex-start; padding: 13px 20px; border-bottom: 1px solid var(--bg); font-size: 0.92rem; }
  .steps-list-row:last-child { border-bottom: none; }
  .step-num-badge  { width: 24px; height: 24px; border-radius: 50%; background: var(--brown); color: white; font-size: 0.72rem; font-weight: 800; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 1px; }

  /* ‚îÄ‚îÄ BUTTONS ‚îÄ‚îÄ */
  .btn {
    display: inline-flex; align-items: center; justify-content: center; gap: 8px;
    padding: 14px 26px; border-radius: var(--radius);
    font-family: var(--font); font-size: 0.88rem; font-weight: 700;
    letter-spacing: 0.08em; text-transform: uppercase;
    cursor: pointer; border: none; transition: all 0.2s; text-decoration: none;
  }

  .btn-primary { background: var(--green); color: white; width: 100%; }
  .btn-primary:hover { background: #1D4733; transform: translateY(-1px); box-shadow: 0 4px 16px rgba(39,93,67,0.25); }
  .btn-primary:active { transform: translateY(0); }
  .btn-primary:disabled { opacity: 0.6; cursor: not-allowed; transform: none; box-shadow: none; }

  .btn-secondary { background: white; color: var(--muted); border: 1.5px solid var(--border); }
  .btn-secondary:hover { border-color: var(--green); color: var(--green); background: rgba(39,93,67,0.04); }

  .btn-danger { background: white; color: var(--red); border: 1.5px solid rgba(187,45,55,0.28); }
  .btn-danger:hover { background: rgba(187,45,55,0.05); border-color: var(--red); }

  .btn-stripe { background: #635BFF; color: white; width: 100%; font-size: 1rem; padding: 17px 28px; margin-top: 8px; }
  .btn-stripe:hover { background: #4F47D6; transform: translateY(-1px); box-shadow: 0 4px 16px rgba(99,91,255,0.3); }

  .btn-row { display: flex; gap: 12px; align-items: center; margin-top: 16px; }

  /* ‚îÄ‚îÄ STRIPE ‚îÄ‚îÄ */
  #card-element { padding: 14px 16px; background: white; border: 1.5px solid var(--border); border-radius: var(--radius); }
  .stripe-trust { display: flex; align-items: center; justify-content: center; gap: 7px; font-size: 0.78rem; color: var(--muted); margin-top: 12px; font-weight: 500; }

  /* ‚îÄ‚îÄ DEMO ‚îÄ‚îÄ */
  .demo-note { font-size: 0.7rem; letter-spacing: 0.09em; text-transform: uppercase; color: var(--muted); text-align: center; margin-bottom: 14px; font-weight: 600; }
  .demo-row  { display: flex; gap: 12px; justify-content: center; max-width: 320px; margin: 0 auto; }

  /* ‚îÄ‚îÄ RESPONSIVE ‚îÄ‚îÄ */
  @media (max-width: 600px) {
    .header-inner { padding: 0 16px; }
    main { padding: 32px 16px 72px; }
    .form-row { grid-template-columns: 1fr; }
    .time-slots { grid-template-columns: repeat(3,1fr); }
    .panel-title { font-size: 1.9rem; }
    .progress-track { padding: 18px 12px 0; }
    .step-label, .header-badge, .logo-sub { display: none; }
  }
</style>
</head>
<body>

<!-- HEADER -->
<header>
  <div class="header-inner">
    <a href="https://www.islamicfamily.ca" class="logo-lockup">
      <svg class="logo-mark" width="291" height="100" viewBox="0 0 291 100" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_header)">
        <path d="M67.7972 50.0032C68.7863 49.0703 69.6127 48.1944 70.4992 47.1618C72.4599 44.8392 74.1544 42.3879 75.5083 39.4372C72.4647 38.3079 69.5324 37.7727 66.5072 37.524C65.1475 37.4127 63.9436 37.3788 62.5849 37.4175C62.6246 36.0588 62.5897 34.8549 62.4862 33.4981C62.2307 30.4691 61.6946 27.5377 60.5652 24.4941C57.6145 25.848 55.1622 27.5426 52.8474 29.5061C51.807 30.3887 50.9322 31.2162 49.9983 32.2052C49.0654 31.2162 48.1896 30.3897 47.157 29.5032C44.8344 27.5426 42.383 25.848 39.4314 24.4941C38.302 27.5377 37.7668 30.47 37.5181 33.4952C37.4068 34.8549 37.373 36.0588 37.4117 37.4175C36.0529 37.3779 34.8491 37.4127 33.4923 37.5162C30.4632 37.7717 27.5319 38.3079 24.4883 39.4372C25.8422 42.3879 27.5367 44.8402 29.5003 47.1551C30.3829 48.1954 31.2103 49.0703 32.1994 50.0041C31.2103 50.9371 30.3838 51.8129 29.4974 52.8455C27.5367 55.1681 25.8422 57.6204 24.4883 60.5711C27.5319 61.7004 30.4642 62.2356 33.4894 62.4843C34.8491 62.5956 36.0529 62.6295 37.4117 62.5908C37.372 63.9495 37.4068 65.1534 37.5104 66.5102C37.7659 69.5392 38.302 72.4706 39.4314 75.5141C42.3821 74.1603 44.8344 72.4657 47.1492 70.5022C48.1896 69.6196 49.0644 68.7921 49.9983 67.8031C50.9312 68.7921 51.807 69.6186 52.8396 70.5051C55.1622 72.4657 57.6136 74.1603 60.5652 75.5141C61.6946 72.4706 62.2297 69.5383 62.4785 66.5131C62.5897 65.1534 62.6236 63.9495 62.5849 62.5908C63.9436 62.6304 65.1475 62.5956 66.5043 62.4921C69.5334 62.2366 72.4647 61.7004 75.5083 60.572C74.1544 57.6213 72.4599 55.1691 70.4963 52.8542C69.6137 51.8139 68.7863 50.939 67.7972 50.0051V50.0032Z" fill="#FAFAEA"/>
        <path d="M35.9609 83.8892C36.1913 83.8921 36.4226 83.8921 36.6539 83.8844C36.7313 83.8825 36.8077 83.8805 36.8832 83.8786C38.96 83.7963 41.0562 83.3589 43.0923 82.5315C45.8398 81.4137 48.1692 79.7105 49.9982 77.6211C53.3302 81.4234 58.0983 83.6754 63.1064 83.8767C63.1858 83.8805 63.2652 83.8825 63.3435 83.8844C63.5739 83.8912 63.8052 83.8912 64.0365 83.8892C63.9939 84.0305 63.9503 84.1679 63.9048 84.3073C62.6845 88.1803 60.5274 91.82 57.4335 94.8732C55.2096 97.0691 52.6866 98.7791 49.9982 99.9994C43.4001 96.9926 38.2971 91.2887 36.0887 84.3063C36.0442 84.1699 36.0006 84.0315 35.9619 83.8902" fill="#F9F6E5"/>
        <path d="M16.1131 64.0371C16.2756 64.2016 16.4382 64.3652 16.6057 64.5239C16.6618 64.5771 16.7169 64.6303 16.7711 64.6816C18.2983 66.0926 20.0896 67.2665 22.1151 68.1201C24.848 69.2727 27.699 69.7169 30.4697 69.531C30.1378 74.576 31.9165 79.5405 35.3172 83.2238C35.3694 83.2828 35.4236 83.3399 35.4778 83.397C35.6365 83.5654 35.7991 83.728 35.9656 83.8906C35.8359 83.9603 35.7072 84.027 35.5765 84.0919C31.9755 85.9684 27.8752 87.0155 23.5299 86.9874C20.4051 86.9671 17.4108 86.3922 14.6479 85.3538C12.1085 78.5621 12.5343 70.9217 15.9098 64.4223C15.9756 64.2945 16.0415 64.1648 16.1131 64.0381" fill="#F9F6E5"/>
        <path d="M16.1102 35.9617C16.1073 36.192 16.1073 36.4233 16.115 36.6536C16.117 36.731 16.1189 36.8075 16.1209 36.883C16.2031 38.9598 16.6405 41.0559 17.468 43.0921C18.5857 45.8395 20.289 48.1689 22.3784 49.998C18.576 53.33 16.3231 58.0981 16.1228 63.1062C16.1189 63.1856 16.117 63.2649 16.115 63.3433C16.1083 63.5736 16.1083 63.8049 16.1102 64.0353C15.9689 63.9927 15.8315 63.9491 15.6921 63.9036C11.8192 62.6833 8.17946 60.5262 5.1262 57.4323C2.93036 55.2084 1.22034 52.6854 0 49.997C3.00681 43.3989 8.71076 38.2959 15.6931 36.0875C15.8296 36.0439 15.9679 35.9994 16.1092 35.9607" fill="#F9F6E5"/>
        <path d="M35.9627 16.1101C35.7982 16.2727 35.6347 16.4353 35.476 16.6027C35.4227 16.6579 35.3695 16.714 35.3182 16.7682C33.9072 18.2953 32.7334 20.0866 31.8798 22.1121C30.7272 24.8451 30.283 27.6961 30.4688 30.4668C25.4239 30.1348 20.4593 31.9136 16.776 35.3143C16.717 35.3665 16.6599 35.4207 16.6028 35.4749C16.4344 35.6336 16.2718 35.7972 16.1093 35.9626C16.0396 35.833 15.9728 35.7043 15.908 35.5736C14.0315 31.9726 12.9844 27.8722 13.0125 23.527C13.0328 20.4021 13.6076 17.4079 14.646 14.645C21.4377 12.1056 29.0781 12.5314 35.5776 15.9069C35.7053 15.9727 35.835 16.0385 35.9618 16.1101" fill="#F9F6E5"/>
        <path d="M64.0365 16.1102C63.8061 16.1073 63.5748 16.1073 63.3435 16.115C63.2661 16.117 63.1897 16.1189 63.1142 16.1209C61.0374 16.2031 58.9412 16.6405 56.9051 17.468C54.1576 18.5857 51.8282 20.288 49.9992 22.3784C46.6672 18.576 41.8991 16.3231 36.8909 16.1228C36.8116 16.1189 36.7322 16.117 36.6539 16.115C36.4235 16.1083 36.1922 16.1083 35.9609 16.1102C36.0035 15.9689 36.0471 15.8315 36.0926 15.6921C37.3129 11.8192 39.47 8.17946 42.5639 5.1262C44.7878 2.93036 47.3108 1.22034 49.9992 0C56.5973 3.00681 61.7003 8.71076 63.9087 15.6931C63.9532 15.8296 63.9968 15.9679 64.0355 16.1092" fill="#F9F6E5"/>
        <path d="M83.8916 35.9616C83.729 35.7971 83.5664 35.6335 83.399 35.4748C83.3438 35.4216 83.2877 35.3684 83.2335 35.3171C81.7064 33.9061 79.9151 32.7322 77.8896 31.8786C75.1566 30.726 72.3056 30.2818 69.5349 30.4676C69.8669 25.4227 68.0881 20.4582 64.6875 16.7749C64.6352 16.7159 64.581 16.6588 64.5268 16.6017C64.3681 16.4333 64.2055 16.2707 64.0391 16.1081C64.1687 16.0384 64.2974 15.9717 64.4281 15.9068C68.0291 14.0303 72.1295 12.9832 76.4747 13.0113C79.6006 13.0316 82.5938 13.6065 85.3568 14.6449C87.8961 21.4366 87.4703 29.077 84.0948 35.5764C84.029 35.7042 83.9632 35.8338 83.8916 35.9606" fill="#F9F6E5"/>
        <path d="M83.8892 64.0375C83.8921 63.8071 83.8921 63.5758 83.8844 63.3455C83.8825 63.2681 83.8805 63.1916 83.8786 63.1162C83.7963 61.0394 83.3589 58.9432 82.5315 56.907C81.4137 54.1596 79.7105 51.8302 77.6211 50.0011C81.4234 46.6692 83.6763 41.901 83.8767 36.8929C83.8805 36.8136 83.8825 36.7342 83.8844 36.6558C83.8921 36.4255 83.8921 36.1942 83.8892 35.9639C84.0305 36.0064 84.168 36.05 84.3073 36.0955C88.1803 37.3158 91.82 39.4729 94.8733 42.5669C97.0691 44.7908 98.7791 47.3137 99.9994 50.0021C96.9926 56.6003 91.2887 61.7032 84.3063 63.9116C84.1699 63.9552 84.0315 63.9997 83.8902 64.0384" fill="#F9F6E5"/>
        <path d="M64.0391 83.8896C64.2036 83.727 64.3671 83.5645 64.5258 83.397C64.5791 83.3409 64.6323 83.2857 64.6836 83.2315C66.0946 81.7044 67.2685 79.9131 68.122 77.8876C69.2746 75.1547 69.7188 72.3037 69.533 69.533C74.5779 69.8649 79.5425 68.0862 83.2258 64.6855C83.2848 64.6332 83.3409 64.579 83.399 64.5249C83.5674 64.3661 83.73 64.2026 83.8925 64.0371C83.9622 64.1668 84.029 64.2955 84.0938 64.4261C85.9703 68.0272 87.0174 72.1275 86.9903 76.4728C86.969 79.5976 86.3942 82.5919 85.3558 85.3548C78.5641 87.8942 70.9237 87.4684 64.4242 84.0929C64.2965 84.027 64.1668 83.9612 64.04 83.8896" fill="#F9F6E5"/>
        <path d="M116.819 46.2749L117.014 52.9176H112.586L112.814 46.6659L112.586 31.9492H117.079L116.819 46.2759V46.2749Z" fill="#FAFAEA"/>
        <path d="M130.721 38.2657L130.135 41.4564L129.614 41.6189C128.984 41.2067 128.355 40.8912 127.726 40.6744C127.096 40.4576 126.543 40.3492 126.066 40.3492C125.545 40.3492 125.132 40.4857 124.829 40.7567C124.525 41.0286 124.373 41.3586 124.373 41.7496C124.373 42.2054 124.573 42.5751 124.975 42.8567C125.376 43.1393 126.011 43.4538 126.879 43.8003C127.747 44.1477 128.464 44.4845 129.029 44.8096C129.593 45.1348 130.076 45.5867 130.477 46.1616C130.879 46.7364 131.079 47.4477 131.079 48.2945C131.079 49.1413 130.857 49.9716 130.412 50.7207C129.967 51.4697 129.288 52.0775 128.377 52.5439C127.465 53.0104 126.346 53.2446 125.023 53.2446C123.46 53.2446 121.843 52.9194 120.172 52.2681L120.661 48.8819L121.084 48.6216C121.756 49.1858 122.505 49.6368 123.33 49.9726C124.154 50.3094 124.881 50.4778 125.511 50.4778C126.097 50.4778 126.553 50.3307 126.878 50.0384C127.204 49.7452 127.367 49.3929 127.367 48.9797C127.367 48.5239 127.166 48.1552 126.765 47.8726C126.364 47.591 125.729 47.2764 124.861 46.929C123.97 46.538 123.244 46.1858 122.679 45.8703C122.114 45.5558 121.632 45.1048 121.231 44.5193C120.829 43.9328 120.629 43.2061 120.629 42.338C120.629 40.927 121.16 39.7715 122.224 38.8705C123.288 37.9705 124.732 37.5195 126.555 37.5195C128.031 37.5195 129.421 37.7692 130.723 38.2686L130.721 38.2657Z" fill="#FAFAEA"/>
        <path d="M138.212 46.2424L138.44 52.917H134.109L134.338 46.6324L134.142 30.3847L138.473 30.0596L138.213 46.2424H138.212Z" fill="#FAFAEA"/>
        <path d="M152.419 38.607C153.364 39.356 153.836 40.4041 153.836 41.7493C153.836 42.1402 153.771 43.377 153.641 45.4616C153.618 46.0693 153.587 46.6935 153.543 47.3342C153.499 47.9748 153.478 48.5226 153.478 48.9784C153.478 49.3481 153.532 49.6026 153.641 49.7439C153.749 49.8852 153.945 49.9558 154.227 49.9558C154.444 49.9558 154.727 49.9123 155.074 49.8252L155.399 50.0855L155.008 52.3646C154.313 52.8204 153.521 53.0913 152.631 53.1784C151.98 53.1126 151.437 52.8804 151.004 52.4778C150.569 52.0762 150.276 51.5178 150.124 50.8007H149.896C148.811 51.9513 147.693 52.7546 146.542 53.2104C144.979 53.1881 143.753 52.7758 142.863 51.9726C141.973 51.1703 141.527 50.0739 141.527 48.6842C141.527 47.5993 141.804 46.7467 142.358 46.1283C142.911 45.5099 143.752 45.0919 144.882 44.8751L149.864 43.9306V42.5951C149.864 41.1841 149.169 40.4786 147.78 40.4786C147.107 40.4786 146.396 40.6305 145.647 40.9344C144.898 41.2383 144.057 41.7154 143.123 42.3667L142.798 42.1712L142.309 39.3057C143.242 38.7202 144.241 38.2692 145.304 37.9547C146.368 37.6402 147.432 37.4824 148.495 37.4824C150.166 37.4824 151.475 37.8569 152.418 38.606H152.419V38.607ZM146.38 46.8609C146.032 46.948 145.778 47.0942 145.614 47.3013C145.452 47.5074 145.37 47.8171 145.37 48.2293C145.37 48.7945 145.522 49.2339 145.826 49.5484C146.13 49.8629 146.553 50.0206 147.096 50.0206C147.943 50.0206 148.832 49.5213 149.766 48.5226L149.831 46.1129L146.38 46.8619V46.8609Z" fill="#FAFAEA"/>
        <path d="M176.878 52.9176L177.139 43.5399C177.139 41.933 176.464 41.1307 175.117 41.1307C174.131 41.1307 173.115 41.5643 172.069 42.4324L171.971 46.2313L172.166 52.9176H167.934L168.196 43.5399C168.217 42.7482 168.05 42.1442 167.692 41.7309C167.333 41.3176 166.806 41.1104 166.112 41.1104C165.15 41.1104 164.106 41.5643 162.982 42.4746V46.1987L163.177 52.9176H159.001L159.23 46.6659L159.068 38.0517L163.144 37.706V39.9216H163.373C164.574 38.8367 165.892 38.0624 167.326 37.5962C169.762 37.5962 171.326 38.4179 172.015 40.0611H172.211C173.449 38.8894 174.858 38.0729 176.44 37.5962C178.088 37.5962 179.376 37.9707 180.24 38.7197C181.103 39.4687 181.503 40.5802 181.461 42.0345L181.363 46.2956L181.558 52.9176H176.878Z" fill="#FAFAEA"/>
        <path d="M188.932 30.8886C189.311 31.2789 189.502 31.844 189.502 32.5814C189.502 33.3506 189.296 33.9529 188.883 34.3873C188.471 34.8218 187.903 35.039 187.181 35.039C186.459 35.039 185.897 34.8478 185.491 34.4644C185.086 34.081 184.883 33.5139 184.883 32.7659C184.883 32.0285 185.096 31.4422 185.521 31.0076C185.946 30.573 186.519 30.3558 187.241 30.3558C187.915 30.3558 188.454 30.5663 188.934 30.8886H188.932ZM185.293 46.6323L185.131 38.0517L189.272 37.706L189.076 46.5964L189.272 52.9176H184.837L185.066 46.6314H185.293V46.6323Z" fill="#FAFAEA"/>
        <path d="M201.501 37.7578C202.21 37.8988 202.845 38.1023 203.401 38.3683L200.683 38.3702C200.99 38.3915 201.252 38.5009 201.503 37.7588L201.501 37.7578ZM200.683 38.3702L202.728 49.2319C203.981 48.6696 205.327 48.3395 205.868 48.3395C206.85 48.3395 208.625 49.3046 208.625 49.3046L207.212 52.694C205.913 52.9736 204.563 53.1132 203.164 53.1132C200.074 53.1132 197.756 52.4302 196.212 51.0637C194.668 49.6971 193.897 47.7187 193.897 45.1301C193.897 42.3637 194.7 40.2076 196.305 38.6625C197.91 37.1163 200.075 37.0039 200.683 38.3702Z" fill="#FAFAEA"/>
        <path d="M227.237 67.8033L227.391 67.9059L227.255 68.7943C226.64 69.0788 226.07 69.2443 225.547 69.2898C224.897 69.1649 224.431 68.9259 224.146 68.5727C223.862 68.2195 223.719 67.7075 223.719 67.0359L223.771 65.8233L223.753 62.2871H222.677L222.609 62.1845L222.695 61.3823H223.737V60.1184L224.916 59.6055L225.052 59.7255L225.018 61.3823H227.341L227.409 61.4849L227.324 62.2871H225.018L224.933 66.9159C224.921 67.3717 225.001 67.6901 225.172 67.873C225.343 68.0549 225.622 68.1459 226.009 68.1459C226.396 68.1459 226.795 68.0317 227.239 67.8043H227.237V67.8033Z" fill="#FAFAEA"/>
        <path d="M234.382 62.2611C234.968 62.9501 235.261 63.9208 235.261 65.1731C235.261 66.4941 234.954 67.516 234.339 68.2399C233.724 68.9628 232.847 69.3248 231.709 69.3248C230.638 69.3248 229.81 68.9802 229.223 68.2912C228.637 67.6021 228.344 66.6315 228.344 65.3792C228.344 64.0582 228.653 63.0363 229.275 62.3124C229.895 61.5895 230.775 61.2285 231.914 61.2285C232.973 61.2285 233.795 61.573 234.383 62.2621H234.382V62.2611ZM230.188 62.9192C229.813 63.4089 229.624 64.1269 229.624 65.0715C229.624 66.165 229.809 66.9847 230.18 67.5315C230.549 68.0783 231.087 68.3512 231.794 68.3512C232.5 68.3512 233.058 68.1122 233.433 67.6341C233.809 67.156 233.996 66.4389 233.996 65.4818C233.996 64.3998 233.812 63.5802 233.441 63.0218C233.071 62.4643 232.533 62.1847 231.827 62.1847C231.12 62.1847 230.563 62.4295 230.187 62.9192H230.188Z" fill="#FAFAEA"/>
        <path d="M244.217 61.6196L244.029 62.7296L243.824 62.7809C243.255 62.4054 242.708 62.2177 242.184 62.2177C241.797 62.2177 241.484 62.3261 241.245 62.5419C241.006 62.7587 240.886 63.02 240.886 63.3277C240.886 63.6355 241.008 63.8822 241.253 64.0709C241.498 64.2587 241.877 64.4726 242.39 64.7116C242.834 64.9168 243.19 65.1016 243.457 65.2661C243.724 65.4316 243.955 65.6503 244.149 65.9242C244.343 66.1971 244.439 66.5339 244.439 66.9316C244.439 67.3526 244.331 67.7455 244.115 68.1103C243.898 68.4752 243.58 68.7684 243.158 68.99C242.737 69.2117 242.236 69.3229 241.655 69.3229C240.858 69.3229 240.101 69.1352 239.383 68.7587L239.554 67.5974L239.708 67.4949C240.026 67.7687 240.371 67.9787 240.742 68.1268C241.111 68.2749 241.462 68.3484 241.792 68.3484C242.213 68.3484 242.554 68.2323 242.816 67.9981C243.079 67.7649 243.209 67.4891 243.209 67.1697C243.209 66.8503 243.086 66.6152 242.843 66.4265C242.598 66.2387 242.219 66.0248 241.706 65.7858C241.262 65.5806 240.903 65.3958 240.63 65.2313C240.357 65.0658 240.123 64.8413 239.93 64.5568C239.736 64.2722 239.639 63.919 239.639 63.498C239.639 62.838 239.881 62.2961 240.365 61.8751C240.849 61.4541 241.506 61.2432 242.338 61.2432C242.988 61.2432 243.614 61.369 244.218 61.6186H244.217V61.6196Z" fill="#FAFAEA"/>
        <path d="M247.136 65.2244V65.2592C247.136 66.2163 247.352 66.9499 247.785 67.4628C248.218 67.9757 248.833 68.2312 249.63 68.2312C250.029 68.2312 250.426 68.1654 250.825 68.0347C251.224 67.9041 251.588 67.7183 251.919 67.4802L252.055 67.5828L251.85 68.7441C251.052 69.1312 250.255 69.3248 249.459 69.3248C248.343 69.3248 247.466 68.9686 246.828 68.2573C246.19 67.546 245.871 66.5696 245.871 65.3279C245.871 64.0863 246.189 63.0789 246.828 62.3385C247.466 61.5982 248.325 61.2285 249.407 61.2285C250.318 61.2285 251.024 61.4879 251.526 62.0056C252.027 62.5243 252.278 63.2443 252.278 64.1666C252.278 64.4744 252.254 64.7647 252.21 65.0376L252.039 65.2089L247.136 65.2253V65.2244ZM247.982 62.7392C247.6 63.1089 247.347 63.6305 247.221 64.3021L250.996 64.2334L251.03 63.9944C251.03 63.4137 250.891 62.9666 250.612 62.6531C250.332 62.3405 249.932 62.1837 249.408 62.1837C248.838 62.1837 248.363 62.3695 247.982 62.7392Z" fill="#FAFAEA"/>
        <path d="M258.426 61.3804V62.6956L258.272 62.7469C258.079 62.6898 257.868 62.6617 257.64 62.6617C257.265 62.6617 256.92 62.8127 256.607 63.1146C256.293 63.4166 255.984 63.8975 255.676 64.5575L255.658 65.7537L255.744 69.1873H254.395L254.48 65.8737L254.411 61.4501L255.692 61.3301L255.675 62.9356H255.777C256.096 62.3665 256.449 61.9591 256.836 61.7143C257.223 61.4694 257.605 61.3465 257.98 61.3465C258.117 61.3465 258.265 61.3581 258.424 61.3814H258.426V61.3804Z" fill="#FAFAEA"/>
        <path d="M260.61 62.3548L262.301 67.8381H262.404L264.386 62.4235L264.659 61.3648H265.871L263.002 69.1881H261.55L259.125 61.3986L260.389 61.3135L260.61 62.3558V62.3548Z" fill="#FAFAEA"/>
        <path d="M267.734 65.2244V65.2592C267.734 66.2163 267.949 66.9499 268.383 67.4628C268.816 67.9757 269.431 68.2312 270.228 68.2312C270.626 68.2312 271.024 68.1654 271.423 68.0347C271.821 67.9041 272.185 67.7183 272.516 67.4802L272.653 67.5828L272.448 68.7441C271.65 69.1312 270.853 69.3248 270.056 69.3248C268.94 69.3248 268.064 68.9686 267.426 68.2573C266.788 67.546 266.469 66.5696 266.469 65.3279C266.469 64.0863 266.787 63.0789 267.426 62.3385C268.064 61.5982 268.923 61.2285 270.005 61.2285C270.916 61.2285 271.622 61.4879 272.123 62.0056C272.625 62.5243 272.875 63.2443 272.875 64.1666C272.875 64.4744 272.852 64.7647 272.808 65.0376L272.636 65.2089L267.734 65.2253V65.2244ZM268.579 62.7392C268.198 63.1089 267.945 63.6305 267.819 64.3021L271.594 64.2334L271.628 63.9944C271.628 63.4137 271.488 62.9666 271.21 62.6531C270.93 62.3405 270.529 62.1837 270.006 62.1837C269.436 62.1837 268.961 62.3695 268.579 62.7392Z" fill="#FAFAEA"/>
        </g>
        <defs><clipPath id="clip0_header"><rect width="290.328" height="100" fill="white"/></clipPath></defs>
      </svg>
    </a>
    <div class="header-badge">Space Rental</div>
  </div>
</header>

<!-- PROGRESS -->
<div class="progress-wrap">
  <div class="progress-track">
    <div class="step-item active" id="step-ind-1">
      <div class="step-circle"><span class="step-num">1</span></div>
      <div class="step-label">About You</div>
    </div>
    <div class="step-item" id="step-ind-2">
      <div class="step-circle"><span class="step-num">2</span></div>
      <div class="step-label">Your Event</div>
    </div>
    <div class="step-item" id="step-ind-3">
      <div class="step-circle"><span class="step-num">3</span></div>
      <div class="step-label">Date & Time</div>
    </div>
    <div class="step-item" id="step-ind-4">
      <div class="step-circle"><span class="step-num">4</span></div>
      <div class="step-label">Review</div>
    </div>
    <div class="step-item" id="step-ind-5">
      <div class="step-circle"><span class="step-num">5</span></div>
      <div class="step-label">Payment</div>
    </div>
  </div>
</div>

<main>

  <!-- STEP 1 -->
  <div class="step-panel active" id="panel-1">
    <div class="panel-eyebrow">Step 1 of 5</div>
    <h1 class="panel-title">Tell us about yourself.</h1>
    <p class="panel-sub">We'll use this to confirm your identity and keep you updated on your booking request.</p>

    <div class="form-row">
      <div class="form-group">
        <label>First name <span class="req">*</span></label>
        <input type="text" id="firstName" placeholder="e.g. Fatima">
        <div class="field-error" id="err-firstName"></div>
      </div>
      <div class="form-group">
        <label>Last name <span class="req">*</span></label>
        <input type="text" id="lastName" placeholder="e.g. Al-Rashid">
        <div class="field-error" id="err-lastName"></div>
      </div>
    </div>

    <div class="form-group">
      <label>Email address <span class="req">*</span></label>
      <input type="email" id="email" placeholder="you@example.com">
      <div class="field-error" id="err-email"></div>
    </div>

    <div class="form-group">
      <label>Phone number <span class="req">*</span></label>
      <input type="tel" id="phone" placeholder="+1 (780) 000-0000">
      <div class="field-error" id="err-phone"></div>
    </div>

    <div class="form-group">
      <label>Organization or community group (if applicable)</label>
      <input type="text" id="org" placeholder="e.g. Al-Rashid Mosque, Edmonton MSA">
    </div>

    <div class="form-group">
      <label>How did you hear about the H√ºb? <span class="req">*</span></label>
      <div class="radio-group">
        <label class="radio-option"><input type="radio" name="referral" value="IslamicFamily website"> <div class="radio-dot"></div> IslamicFamily website</label>
        <label class="radio-option"><input type="radio" name="referral" value="Social media"> <div class="radio-dot"></div> Social media</label>
        <label class="radio-option"><input type="radio" name="referral" value="Friend or community member"> <div class="radio-dot"></div> Friend or community member</label>
        <label class="radio-option"><input type="radio" name="referral" value="IslamicFamily staff"> <div class="radio-dot"></div> IslamicFamily staff</label>
        <label class="radio-option"><input type="radio" name="referral" value="I've booked before"> <div class="radio-dot"></div> I've booked here before</label>
        <label class="radio-option"><input type="radio" name="referral" value="Other"> <div class="radio-dot"></div> Other</label>
      </div>
      <div class="field-error" id="err-referral"></div>
    </div>

    <button class="btn btn-primary" onclick="goToStep(2)">Continue ‚Üí</button>
  </div>

  <!-- STEP 2 -->
  <div class="step-panel" id="panel-2">
    <div class="panel-eyebrow">Step 2 of 5</div>
    <h1 class="panel-title">Tell us about your event.</h1>
    <p class="panel-sub">These screening questions help us ensure the space is the right fit and allow us to prepare for your visit.</p>

    <div class="form-group">
      <label>Type of event <span class="req">*</span></label>
      <div class="radio-group">
        <label class="radio-option"><input type="radio" name="eventType" value="Community Meeting or Workshop"> <div class="radio-dot"></div> Community meeting or workshop</label>
        <label class="radio-option"><input type="radio" name="eventType" value="Religious Gathering"> <div class="radio-dot"></div> Religious gathering or halaqah</label>
        <label class="radio-option"><input type="radio" name="eventType" value="Family Celebration"> <div class="radio-dot"></div> Family celebration or gathering</label>
        <label class="radio-option"><input type="radio" name="eventType" value="Photo or Video Shoot"> <div class="radio-dot"></div> Photo or video shoot</label>
        <label class="radio-option"><input type="radio" name="eventType" value="Training or Education"> <div class="radio-dot"></div> Training or educational session</label>
        <label class="radio-option"><input type="radio" name="eventType" value="Other"> <div class="radio-dot"></div> Other</label>
      </div>
      <div class="field-error" id="err-eventType"></div>
    </div>

    <div class="form-group">
      <label>Expected number of attendees <span class="req">*</span></label>
      <input type="number" id="attendees" placeholder="e.g. 20" min="1" max="100">
      <div class="field-error" id="err-attendees"></div>
    </div>

    <div class="form-group">
      <label>Briefly describe your event <span class="req">*</span></label>
      <textarea id="description" placeholder="What's happening, the purpose of the event, any special considerations‚Ä¶"></textarea>
      <div class="field-error" id="err-description"></div>
    </div>

    <div class="form-group">
      <label>House rules ‚Äî please check each one <span class="req">*</span></label>
      <div class="checkbox-group">
        <label class="checkbox-option"><input type="checkbox" name="houseRules" id="rule-halal"> <div class="checkbox-dot"></div> I agree that no alcohol or non-halal food items will be brought into the space</label>
        <label class="checkbox-option"><input type="checkbox" name="houseRules" id="rule-dishes"> <div class="checkbox-dot"></div> I agree not to bring bottled water or disposable dishes/utensils into the space ‚Äî I will use the reusable dishes provided and load/unload the dishwasher</label>
        <label class="checkbox-option"><input type="checkbox" name="houseRules" id="rule-cleanliness"> <div class="checkbox-dot"></div> I will leave the space better than I found it ‚Äî empty the trash, return furniture and items to their original position</label>
        <label class="checkbox-option"><input type="checkbox" name="houseRules" id="rule-capacity"> <div class="checkbox-dot"></div> I agree to respect the posted capacity limits and not exceed the number of attendees stated in this request</label>
        <label class="checkbox-option"><input type="checkbox" name="houseRules" id="rule-noise"> <div class="checkbox-dot"></div> I agree to be mindful of noise levels and the surrounding community, especially during evening hours</label>
        <label class="checkbox-option"><input type="checkbox" name="houseRules" id="rule-damage"> <div class="checkbox-dot"></div> I accept responsibility for any damage to the space, equipment, or property occurring during my booking</label>
      </div>
      <div class="field-error" id="err-houseRules"></div>
    </div>

    <div class="form-group">
      <label>Will there be amplified sound or music? <span class="req">*</span></label>
      <div class="radio-group">
        <label class="radio-option"><input type="radio" name="sound" value="No"> <div class="radio-dot"></div> No</label>
        <label class="radio-option"><input type="radio" name="sound" value="Yes"> <div class="radio-dot"></div> Yes</label>
      </div>
      <div class="field-error" id="err-sound"></div>
    </div>

    <div class="form-group">
      <label>Equipment or setup needed?</label>
      <div class="checkbox-group">
        <label class="checkbox-option"><input type="checkbox" name="equipment" value="Tables & Chairs"> <div class="checkbox-dot"></div> Tables & chairs rearrangement</label>
        <label class="checkbox-option"><input type="checkbox" name="equipment" value="AV / Projector"> <div class="checkbox-dot"></div> AV / projector & screen</label>
        <label class="checkbox-option"><input type="checkbox" name="equipment" value="Whiteboard"> <div class="checkbox-dot"></div> Whiteboard</label>
        <label class="checkbox-option"><input type="checkbox" name="equipment" value="Catering Setup"> <div class="checkbox-dot"></div> Catering setup area</label>
        <label class="checkbox-option"><input type="checkbox" name="equipment" value="None"> <div class="checkbox-dot"></div> None needed</label>
      </div>
    </div>

    <div class="form-group">
      <label>Rental agreement <span class="req">*</span></label>
      <div class="checkbox-group">
        <label class="checkbox-option"><input type="checkbox" id="agreeRules"> <div class="checkbox-dot"></div> I have read and agree to the <a href="https://www.islamicfamily.ca" style="color:var(--green);font-weight:700">IslamicFamily H√ºb rental agreement and house rules</a></label>
      </div>
      <div class="field-error" id="err-agree"></div>
    </div>

    <div class="btn-row">
      <button class="btn btn-secondary" onclick="goToStep(1)">‚Üê Back</button>
      <button class="btn btn-primary" onclick="goToStep(3)" style="flex:1">Continue ‚Üí</button>
    </div>
  </div>

  <!-- STEP 3 -->
  <div class="step-panel" id="panel-3">
    <div class="panel-eyebrow">Step 3 of 5</div>
    <h1 class="panel-title">Pick your date & time.</h1>
    <p class="panel-sub">Availability is checked against the room's live calendar. Greyed dates are already booked.</p>

    <div class="info-box">
      üîå <strong>Calendar configuration needed.</strong> Add your Google Calendar API key to the script constants to enable live availability checking. A few demo dates are currently shown as unavailable.
    </div>

    <div class="avail-header">
      <div class="month-label" id="cal-month-label"></div>
      <div class="avail-nav">
        <button onclick="changeMonth(-1)">&#8249;</button>
        <button onclick="changeMonth(1)">&#8250;</button>
      </div>
    </div>

    <div class="cal-grid" id="cal-grid"></div>

    <div class="legend">
      <div class="legend-item"><div class="legend-dot" style="background:var(--green)"></div> Selected</div>
      <div class="legend-item"><div class="legend-dot" style="background:#F4F4EE;border:1px solid var(--border)"></div> Unavailable</div>
      <div class="legend-item"><div class="legend-dot" style="background:white;border:1.5px solid var(--border)"></div> Available</div>
    </div>

    <div id="time-picker-section" style="margin-top:32px;display:none">
      <hr class="divider">
      <label style="margin-bottom:12px;display:block">Select start time</label>
      <div class="time-slots" id="start-times"></div>
      <div id="end-picker" style="margin-top:24px;display:none">
        <label style="margin-bottom:12px;display:block">Select end time</label>
        <div class="time-slots" id="end-times"></div>
      </div>
      <div class="field-error" id="err-time" style="margin-top:12px"></div>
    </div>

    <div class="btn-row" style="margin-top:32px">
      <button class="btn btn-secondary" onclick="goToStep(2)">‚Üê Back</button>
      <button class="btn btn-primary" onclick="goToStep(4)" style="flex:1">Continue ‚Üí</button>
    </div>
  </div>

  <!-- STEP 4 -->
  <div class="step-panel" id="panel-4">
    <div class="panel-eyebrow">Step 4 of 5</div>
    <h1 class="panel-title">Review your request.</h1>
    <p class="panel-sub">Once submitted, our team will review your request and respond within 24 hours. Payment is only collected after approval.</p>

    <div class="summary-card">
      <div class="summary-head"><h3>Booking Summary</h3></div>
      <div class="summary-body">
        <div class="summary-row"><span class="summary-key">Name</span><span class="summary-val" id="s-name"></span></div>
        <div class="summary-row"><span class="summary-key">Email</span><span class="summary-val" id="s-email"></span></div>
        <div class="summary-row"><span class="summary-key">Phone</span><span class="summary-val" id="s-phone"></span></div>
        <div class="summary-row"><span class="summary-key">Organization</span><span class="summary-val" id="s-org"></span></div>
        <div class="summary-row"><span class="summary-key">Event Type</span><span class="summary-val" id="s-event"></span></div>
        <div class="summary-row"><span class="summary-key">Attendees</span><span class="summary-val" id="s-attendees"></span></div>
        <div class="summary-row"><span class="summary-key">Date</span><span class="summary-val" id="s-date"></span></div>
        <div class="summary-row"><span class="summary-key">Time</span><span class="summary-val" id="s-time"></span></div>
        <div class="summary-row"><span class="summary-key">Duration</span><span class="summary-val" id="s-duration"></span></div>
        <div class="summary-row"><span class="summary-key">Equipment</span><span class="summary-val" id="s-equipment"></span></div>
        <div class="summary-row"><span class="summary-key">House Rules</span><span class="summary-val" id="s-houseRules"></span></div>
        <div class="summary-row"><span class="summary-key">Sound</span><span class="summary-val" id="s-sound"></span></div>
      </div>
      <div class="price-block">
        <span class="price-label">Estimated Total</span>
        <span class="price-amount" id="s-price"></span>
      </div>
    </div>

    <div class="warn-box">
      ‚è≥ <strong>Your spot is not yet reserved.</strong> Submitting starts the review process ‚Äî you'll only be charged once approved by our team.
    </div>

    <div class="btn-row">
      <button class="btn btn-secondary" onclick="goToStep(3)">‚Üê Back</button>
      <button class="btn btn-primary" id="submit-btn" onclick="submitRequest()" style="flex:1">Submit Request ‚Üí</button>
    </div>
  </div>

  <!-- STEP 5 ‚Äî Pending -->
  <div class="step-panel" id="panel-5">
    <div class="state-center">
      <div class="state-icon pending">üìã</div>
      <div class="panel-eyebrow" style="text-align:center">Request Submitted</div>
      <h1 class="panel-title" style="text-align:center">You're in the queue!</h1>
      <p class="panel-sub" style="text-align:center;max-width:420px;margin:0 auto 32px">
        Your booking request has been sent to the IslamicFamily team. We'll respond within 24 hours at <strong id="confirm-email"></strong>.
      </p>
      <div class="steps-list">
        <div class="steps-list-head">What happens next</div>
        <div class="steps-list-row"><div class="step-num-badge">1</div><span>Our team reviews your event details in Notion</span></div>
        <div class="steps-list-row"><div class="step-num-badge">2</div><span>You receive an approval or denial email within 24 hrs</span></div>
        <div class="steps-list-row"><div class="step-num-badge">3</div><span>If approved, a secure Stripe payment link is emailed to you</span></div>
        <div class="steps-list-row"><div class="step-num-badge">4</div><span>Payment confirmed ‚Üí booking secured. Alhamdulillah!</span></div>
      </div>
      <div class="demo-note">Demo only ‚Äî simulate a team decision:</div>
      <div class="demo-row">
        <button class="btn btn-primary" onclick="simulateApproval(true)" style="width:auto;padding:12px 24px;flex:1">‚úì Approve</button>
        <button class="btn btn-danger" onclick="simulateApproval(false)" style="padding:12px 24px;flex:1">‚úó Deny</button>
      </div>
    </div>
  </div>

  <!-- STEP 6 ‚Äî Payment -->
  <div class="step-panel" id="panel-6">
    <div class="panel-eyebrow">Final Step</div>
    <h1 class="panel-title">Complete your payment.</h1>
    <p class="panel-sub">Your booking has been approved ‚Äî secure your spot with payment below. <em>Barakallahu feekum!</em></p>

    <div class="info-box">‚úÖ <strong>Approved by the IslamicFamily team.</strong> Your date and time are held for 30 minutes while you complete payment.</div>

    <div class="summary-card">
      <div class="summary-head"><h3>Payment Summary</h3></div>
      <div class="summary-body">
        <div class="summary-row"><span class="summary-key">Event</span><span class="summary-val" id="pay-event"></span></div>
        <div class="summary-row"><span class="summary-key">Date</span><span class="summary-val" id="pay-date"></span></div>
        <div class="summary-row"><span class="summary-key">Time</span><span class="summary-val" id="pay-time"></span></div>
        <div class="summary-row"><span class="summary-key">Duration</span><span class="summary-val" id="pay-duration"></span></div>
        <div class="summary-row"><span class="summary-key">Rate</span><span class="summary-val">$75 / hour</span></div>
      </div>
      <div class="price-block">
        <span class="price-label">Total Due</span>
        <span class="price-amount" id="pay-total"></span>
      </div>
    </div>

    <div class="warn-box">üîå <strong>Stripe configuration needed.</strong> Replace <code>STRIPE_PUBLISHABLE_KEY</code> and <code>BACKEND_URL</code> in the script constants to enable live payments.</div>

    <div class="form-group">
      <label>Name on card</label>
      <input type="text" id="cardName" placeholder="Full name as it appears on card">
    </div>

    <div class="form-group">
      <label>Card details</label>
      <div id="card-element">
        <input type="text" placeholder="4242 4242 4242 4242     MM / YY     CVC" style="border:none;background:transparent;width:100%;font-family:monospace;font-size:0.9rem;color:var(--muted);outline:none">
      </div>
      <div class="field-error" id="card-errors"></div>
    </div>

    <button class="btn btn-stripe" onclick="handlePayment()">üîí Pay <span id="btn-pay-amount"></span> Securely via Stripe</button>

    <div class="stripe-trust">
      <svg width="14" height="14" viewBox="0 0 14 14" fill="none"><rect width="14" height="14" rx="2" fill="#635BFF"/><path d="M7.15 5.4c0-.47.39-.65.98-.65.88 0 1.98.27 2.87.75V3.42A7.66 7.66 0 007.13 3c-2.44 0-4.06 1.27-4.06 3.39 0 3.3 4.56 2.77 4.56 4.19 0 .55-.48.73-1.12.73-.97 0-2.21-.4-3.19-1v2.12c1.09.47 2.18.67 3.19.67 2.47 0 4.17-1.21 4.17-3.36-.01-3.57-4.53-2.93-4.53-4.34z" fill="white"/></svg>
      Powered by Stripe ‚Äî 256-bit encrypted, PCI compliant
    </div>

    <div class="btn-row" style="margin-top:20px">
      <button class="btn btn-secondary" onclick="goToStep(5)" style="width:100%">‚Üê Back</button>
    </div>
  </div>

  <!-- DENIED -->
  <div class="step-panel" id="panel-denied">
    <div class="state-center">
      <div class="state-icon denied">üö´</div>
      <div class="panel-eyebrow" style="text-align:center">Request Not Approved</div>
      <h1 class="panel-title" style="text-align:center;color:var(--ink)">We're sorry.</h1>
      <p class="panel-sub" style="text-align:center;max-width:420px;margin:0 auto 32px">
        Unfortunately your booking request wasn't approved at this time. Please check your email for details, or reach out at <a href="/cdn-cgi/l/email-protection#f990979f96b9908a959894909a9f9894909580d79a98" style="color:var(--green);font-weight:700"><span class="__cf_email__" data-cfemail="31585f575e7158425d505c585257505c585d481f5250">[email&#160;protected]</span></a>.
      </p>
      <button class="btn btn-primary" onclick="resetForm()" style="max-width:280px;margin:0 auto;display:flex">Try a different date ‚Üí</button>
    </div>
  </div>

  <!-- CONFIRMED -->
  <div class="step-panel" id="panel-confirmed">
    <div class="state-center">
      <div class="state-icon success">‚úì</div>
      <div class="panel-eyebrow" style="text-align:center">Booking Confirmed</div>
      <h1 class="panel-title" style="text-align:center">You're booked!</h1>
      <p class="panel-sub" style="text-align:center;max-width:420px;margin:0 auto 32px">
        Payment received. A confirmation and receipt have been sent to your email. We look forward to welcoming you to the H√ºb. <em>Ahlan wa sahlan!</em>
      </p>
      <div class="summary-card" style="max-width:440px;margin:0 auto 32px;text-align:left">
        <div class="summary-head"><h3>Confirmation Details</h3></div>
        <div class="summary-body">
          <div class="summary-row"><span class="summary-key">Booking Ref</span><span class="summary-val" id="conf-ref" style="font-weight:800;color:var(--green)"></span></div>
          <div class="summary-row"><span class="summary-key">Date</span><span class="summary-val" id="conf-date"></span></div>
          <div class="summary-row"><span class="summary-key">Time</span><span class="summary-val" id="conf-time"></span></div>
          <div class="summary-row"><span class="summary-key">Status</span><span class="summary-val" style="color:var(--green);font-weight:700">‚úì Confirmed & Paid</span></div>
        </div>
      </div>
      <button class="btn btn-secondary" onclick="resetForm()" style="margin:0 auto;display:flex">Make another booking</button>
    </div>
  </div>

</main>

<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script src="https://js.stripe.com/v3/"></script>
<script>
const GOOGLE_CAL_API_KEY     = 'YOUR_GOOGLE_CALENDAR_API_KEY';
const CALENDAR_ID            = 'c_18880pqehfvighpviva67ual46g58%40resource.calendar.google.com';
const STRIPE_PUBLISHABLE_KEY = 'pk_test_YOUR_STRIPE_PUBLISHABLE_KEY';
const HOURLY_RATE            = 75;
const BACKEND_URL            = 'http://localhost:3001';
const TIME_OPTIONS = ['08:00','09:00','10:00','11:00','12:00','13:00','14:00','15:00','16:00','17:00','18:00','19:00','20:00'];

let state = {
  step:1, calYear:null, calMonth:null,
  selectedDate:null, selectedStart:null, selectedEnd:null,
  busyDays:new Set(), busySlots:{},
  notionPageId:null, stripeUrl:null
};

function goToStep(n) {
  if (n > state.step && !validateStep(state.step)) return;
  document.querySelectorAll('.step-panel').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.step-item').forEach((el,i) => {
    el.classList.remove('active','done');
    if (i+1 < n) el.classList.add('done');
    else if (i+1 === n) el.classList.add('active');
  });
  const map = {1:'panel-1',2:'panel-2',3:'panel-3',4:'panel-4',5:'panel-5',6:'panel-6'};
  if (map[n]) document.getElementById(map[n]).classList.add('active');
  if (n===3 && !state.calYear) initCalendar();
  if (n===4) populateSummary();
  if (n===5) document.getElementById('confirm-email').textContent = document.getElementById('email').value;
  if (n===6) populatePayment();
  state.step = n;
  window.scrollTo({top:0,behavior:'smooth'});
}

function validateStep(step) {
  let ok = true;
  const req = (id, msg) => {
    const el = document.getElementById(id), err = document.getElementById('err-'+id);
    if (!err) return;
    if (!el?.value?.trim()) { err.textContent = msg; ok = false; } else err.textContent = '';
  };
  const reqRadio = (name, errId, msg) => {
    const err = document.getElementById('err-'+errId);
    if (!err) return;
    if (!document.querySelector(`input[name="${name}"]:checked`)) { err.textContent = msg; ok = false; } else err.textContent = '';
  };
  if (step===1) {
    req('firstName','First name is required.');
    req('lastName','Last name is required.');
    req('email','Email address is required.');
    req('phone','Phone number is required.');
    reqRadio('referral','referral','Please let us know how you heard about us.');
    const e = document.getElementById('email').value;
    if (e && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)) { document.getElementById('err-email').textContent='Please enter a valid email.'; ok=false; }
  }
  if (step===2) {
    reqRadio('eventType','eventType','Please select an event type.');
    req('attendees','Number of attendees is required.');
    req('description','A brief description is required.');
    reqRadio('sound','sound','Please indicate if there will be amplified sound.');
    const ruleBoxes = document.querySelectorAll('input[name="houseRules"]');
    const allChecked = [...ruleBoxes].every(cb => cb.checked);
    const rulesErr = document.getElementById('err-houseRules');
    if (!allChecked) { rulesErr.textContent = 'Please read and check all house rules before continuing.'; ok=false; } else rulesErr.textContent='';
    const agree = document.getElementById('agreeRules'), err = document.getElementById('err-agree');
    if (!agree.checked) { err.textContent='You must agree to the rental agreement.'; ok=false; } else err.textContent='';
  }
  if (step===3) {
    const err = document.getElementById('err-time');
    if (!state.selectedDate) { err.textContent='Please select a date.'; ok=false; }
    else if (!state.selectedStart) { err.textContent='Please select a start time.'; ok=false; }
    else if (!state.selectedEnd) { err.textContent='Please select an end time.'; ok=false; }
    else err.textContent='';
  }
  return ok;
}

function initCalendar() {
  const now = new Date();
  state.calYear = now.getFullYear(); state.calMonth = now.getMonth();
  fetchBusyDays(); renderCalendar();
}

function changeMonth(d) {
  state.calMonth += d;
  if (state.calMonth>11) { state.calMonth=0; state.calYear++; }
  if (state.calMonth<0)  { state.calMonth=11; state.calYear--; }
  state.selectedDate=null; state.selectedStart=null; state.selectedEnd=null;
  fetchBusyDays(); renderCalendar();
}

async function fetchBusyDays() {
  if (GOOGLE_CAL_API_KEY==='YOUR_GOOGLE_CALENDAR_API_KEY') {
    state.busyDays = new Set([4,9,15,20,25]); renderCalendar(); return;
  }
  const start = new Date(state.calYear,state.calMonth,1).toISOString();
  const end   = new Date(state.calYear,state.calMonth+1,0,23,59).toISOString();
  try {
    const url = `https://www.googleapis.com/calendar/v3/calendars/${CALENDAR_ID}/events?key=${GOOGLE_CAL_API_KEY}&timeMin=${start}&timeMax=${end}&singleEvents=true&orderBy=startTime`;
    const data = await (await fetch(url)).json();
    state.busyDays = new Set(); state.busySlots = {};
    (data.items||[]).forEach(ev => {
      const d = new Date(ev.start.dateTime||ev.start.date).getDate();
      state.busyDays.add(d);
      if (!state.busySlots[d]) state.busySlots[d]=[];
      state.busySlots[d].push({start:ev.start.dateTime,end:ev.end.dateTime});
    });
  } catch(e) { console.warn('Calendar fetch failed',e); }
  renderCalendar();
}

function renderCalendar() {
  const M=['January','February','March','April','May','June','July','August','September','October','November','December'];
  document.getElementById('cal-month-label').textContent = `${M[state.calMonth]} ${state.calYear}`;
  const today = new Date(); today.setHours(0,0,0,0);
  const firstDay = new Date(state.calYear,state.calMonth,1).getDay();
  const dim = new Date(state.calYear,state.calMonth+1,0).getDate();
  const DN = ['Su','Mo','Tu','We','Th','Fr','Sa'];
  let html = DN.map(d=>`<div class="cal-day-name">${d}</div>`).join('');
  for (let i=0;i<firstDay;i++) html+='<div class="cal-day empty"></div>';
  for (let d=1;d<=dim;d++) {
    const date = new Date(state.calYear,state.calMonth,d);
    const isPast=date<today, isBusy=state.busyDays.has(d)&&!isPast;
    const isToday=date.toDateString()===today.toDateString(), isSel=state.selectedDate===d;
    let cls='cal-day';
    if (isPast) cls+=' past'; else if (isBusy) cls+=' busy'; else cls+=' available';
    if (isToday) cls+=' today'; if (isSel) cls+=' selected';
    const click=(!isPast&&!isBusy)?`onclick="selectDay(${d})"`:'';
    html+=`<div class="${cls}" ${click}>${d}</div>`;
  }
  document.getElementById('cal-grid').innerHTML = html;
}

function selectDay(d) {
  state.selectedDate=d; state.selectedStart=null; state.selectedEnd=null;
  renderCalendar(); renderTimeSlots();
  document.getElementById('time-picker-section').style.display='block';
  document.getElementById('err-time').textContent='';
}

function renderTimeSlots() {
  const sh = TIME_OPTIONS.slice(0,-1).map(t=>`<div class="time-slot${state.selectedStart===t?' selected':''}" onclick="selectStart('${t}')">${formatTime(t)}</div>`).join('');
  document.getElementById('start-times').innerHTML = sh;
  document.getElementById('end-picker').style.display = state.selectedStart?'block':'none';
  if (state.selectedStart) {
    const si = TIME_OPTIONS.indexOf(state.selectedStart);
    const eh = TIME_OPTIONS.slice(si+1).map(t=>`<div class="time-slot${state.selectedEnd===t?' selected':''}" onclick="selectEnd('${t}')">${formatTime(t)}</div>`).join('');
    document.getElementById('end-times').innerHTML = eh;
  }
}

function selectStart(t) { state.selectedStart=t; state.selectedEnd=null; renderTimeSlots(); }
function selectEnd(t)   { state.selectedEnd=t; renderTimeSlots(); }

function formatTime(t) {
  const [h,m]=t.split(':').map(Number), ampm=h>=12?'PM':'AM', hr=h>12?h-12:h===0?12:h;
  return `${hr}:${m.toString().padStart(2,'0')} ${ampm}`;
}

function durationHours() {
  if (!state.selectedStart||!state.selectedEnd) return 0;
  return TIME_OPTIONS.indexOf(state.selectedEnd)-TIME_OPTIONS.indexOf(state.selectedStart);
}

function formatDate(d) {
  if (!d) return '‚Äî';
  const M=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
  return `${M[state.calMonth]} ${d}, ${state.calYear}`;
}

function populateSummary() {
  const get=id=>document.getElementById(id)?.value||'‚Äî';
  const gr=name=>document.querySelector(`input[name="${name}"]:checked`)?.value||'‚Äî';
  const ch=[...document.querySelectorAll('input[name="equipment"]:checked')].map(c=>c.value);
  const dur=durationHours();
  document.getElementById('s-name').textContent=`${get('firstName')} ${get('lastName')}`;
  document.getElementById('s-email').textContent=get('email');
  document.getElementById('s-phone').textContent=get('phone');
  document.getElementById('s-org').textContent=get('org')||'N/A';
  document.getElementById('s-event').textContent=gr('eventType');
  document.getElementById('s-attendees').textContent=get('attendees')+' people';
  document.getElementById('s-date').textContent=formatDate(state.selectedDate);
  document.getElementById('s-time').textContent=`${formatTime(state.selectedStart)} ‚Äì ${formatTime(state.selectedEnd)}`;
  document.getElementById('s-duration').textContent=`${dur} hour${dur!==1?'s':''}`;
  document.getElementById('s-equipment').textContent=ch.length?ch.join(', '):'None';
  document.getElementById('s-houseRules').textContent = '‚úì All 6 rules agreed';
  document.getElementById('s-sound').textContent=gr('sound');
  document.getElementById('s-price').textContent=`$${(dur*HOURLY_RATE).toLocaleString()}`;
}

async function submitRequest() {
  const btn=document.getElementById('submit-btn');
  btn.textContent='Submitting‚Ä¶'; btn.disabled=true;
  const gr=name=>document.querySelector(`input[name="${name}"]:checked`)?.value||'';
  const ch=[...document.querySelectorAll('input[name="equipment"]:checked')].map(c=>c.value);
  const payload={
    firstName:document.getElementById('firstName').value, lastName:document.getElementById('lastName').value,
    email:document.getElementById('email').value, phone:document.getElementById('phone').value,
    org:document.getElementById('org').value, referral:gr('referral'), eventType:gr('eventType'),
    attendees:document.getElementById('attendees').value, description:document.getElementById('description').value,
    houseRulesAgreed:true, sound:gr('sound'), equipment:ch,
    date:formatDate(state.selectedDate), startTime:state.selectedStart, endTime:state.selectedEnd,
    durationHours:durationHours(), totalAmount:durationHours()*HOURLY_RATE,
  };
  try {
    const res=await fetch(`${BACKEND_URL}/api/booking-request`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});
    if (!res.ok) throw new Error();
    const data=await res.json(); state.notionPageId=data.notionPageId;
  } catch(e) {
    btn.textContent='Submit Request ‚Üí'; btn.disabled=false;
    alert('Something went wrong. Please try again or email info@islamicfamily.ca'); return;
  }
  goToStep(5); startStatusPolling();
}

let _poll=null;
function startStatusPolling() {
  if (_poll) clearInterval(_poll);
  _poll=setInterval(async()=>{
    if (!state.notionPageId) return;
    try {
      const res=await fetch(`${BACKEND_URL}/api/booking-status/${state.notionPageId}`);
      if (!res.ok) return;
      const {status,stripeUrl}=await res.json();
      if (status==='Approved') { clearInterval(_poll); state.stripeUrl=stripeUrl; simulateApproval(true); }
      else if (status==='Denied') { clearInterval(_poll); simulateApproval(false); }
    } catch(e){}
  },10000);
}

function simulateApproval(approved) {
  document.querySelectorAll('.step-panel').forEach(p=>p.classList.remove('active'));
  if (!approved) { document.getElementById('panel-denied').classList.add('active'); return; }
  document.querySelectorAll('.step-item').forEach((el,i)=>{ el.classList.remove('active','done'); if(i<5) el.classList.add('done'); });
  document.getElementById('panel-6').classList.add('active');
  populatePayment(); window.scrollTo({top:0,behavior:'smooth'});
}

function populatePayment() {
  const dur=durationHours(), total=dur*HOURLY_RATE;
  document.getElementById('pay-event').textContent=document.querySelector('input[name="eventType"]:checked')?.value||'‚Äî';
  document.getElementById('pay-date').textContent=formatDate(state.selectedDate);
  document.getElementById('pay-time').textContent=`${formatTime(state.selectedStart)} ‚Äì ${formatTime(state.selectedEnd)}`;
  document.getElementById('pay-duration').textContent=`${dur} hr`;
  document.getElementById('pay-total').textContent=`$${total.toLocaleString()}`;
  document.getElementById('btn-pay-amount').textContent=`$${total.toLocaleString()}`;
}

async function handlePayment() {
  if (state.stripeUrl) { window.location.href=state.stripeUrl; return; }
  showConfirmation();
}

function showConfirmation() {
  document.querySelectorAll('.step-panel').forEach(p=>p.classList.remove('active'));
  document.getElementById('panel-confirmed').classList.add('active');
  const ref='BK-'+Math.random().toString(36).substring(2,8).toUpperCase();
  document.getElementById('conf-ref').textContent=ref;
  document.getElementById('conf-date').textContent=formatDate(state.selectedDate);
  document.getElementById('conf-time').textContent=`${formatTime(state.selectedStart)} ‚Äì ${formatTime(state.selectedEnd)}`;
  window.scrollTo({top:0,behavior:'smooth'});
}

function resetForm() { location.reload(); }

document.addEventListener('DOMContentLoaded',()=>{ document.getElementById('step-ind-1').classList.add('active'); });
</script>
</body>
</html>
